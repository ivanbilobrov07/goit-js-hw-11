{"mappings":"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","sources":["src/js/index(scroll).js","src/js/js-helpers-2/takingRefs.js","src/js/js-helpers-2/pixabay-api.js","src/js/js-helpers-2/createMarkup.js"],"sourcesContent":["import OnlyScroll from 'only-scrollbar';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport {\n  galleryRef,\n  searchFormRef,\n  loaderIconRef,\n  galleryControlersRef,\n  galleryWrappersRef,\n} from './js-helpers-2/takingRefs';\nimport { APIHandler } from './js-helpers-2/pixabay-api';\nimport { createMarkup } from './js-helpers-2/createMarkup';\n\nconst generateMarkup = async data => {\n  loaderIconRef.classList.add('hidden');\n  galleryRef.insertAdjacentHTML('beforeend', await createMarkup(data));\n\n  galleryControlersRef.style.position = 'relative';\n  loaderIconRef.style.top = 'calc(100% - 50px)';\n};\n\nconst handleObserverEvent = async (entries, observer) => {\n  entries.forEach(async entry => {\n    if (entry.isIntersecting) {\n      apiHandler.incrementPageCounter();\n\n      try {\n        const dataFromAPI = await apiHandler.fetchItemsByvalue();\n        await generateMarkup(dataFromAPI);\n        lightbox.refresh();\n      } catch (e) {\n        loaderIconRef.classList.add('hidden');\n        observer.unobserve(galleryControlersRef);\n        Notiflix.Notify.failure(e.message);\n      }\n    }\n  });\n};\n\nconst handleFormSubmit = async e => {\n  e.preventDefault();\n\n  galleryRef.innerHTML = '';\n  galleryControlersRef.style.position = 'static';\n  loaderIconRef.style.top = '50%';\n\n  const formRef = e.currentTarget;\n\n  let dataToSearch = formRef.elements.searchQuery.value;\n  const languageOfData = formRef.elements.language.value;\n\n  apiHandler = new APIHandler(dataToSearch, languageOfData);\n\n  try {\n    const dataFromAPI = await apiHandler.fetchItemsByvalue();\n    await generateMarkup(dataFromAPI);\n  } catch (e) {\n    loaderIconRef.classList.add('hidden');\n    Notiflix.Notify.failure(e.message);\n  }\n\n  formRef.elements.searchQuery.value = '';\n\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  var options = {\n    root: null,\n    rootMargin: '300px',\n    threshold: 1.0,\n  };\n  const observer = new IntersectionObserver(handleObserverEvent, options);\n  observer.observe(galleryControlersRef);\n};\n\nlet apiHandler, lightbox;\n\nsearchFormRef.addEventListener('submit', handleFormSubmit);\n","const searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\nconst loaderIconRef = document.querySelector('.loader-wrapper');\nconst galleryWrappersRef = document.querySelector('.gallery-wrapper');\nconst galleryControlersRef = document.querySelector('.gallery-inner');\n\nexport {\n  searchFormRef,\n  galleryRef,\n  loaderIconRef,\n  galleryControlersRef,\n  galleryWrappersRef,\n};\n","import axios from 'axios';\n\nimport { loaderIconRef } from './takingRefs';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '37108036-8a6d23bc06a2bda3e904321d5';\n\nclass APIHandler {\n  constructor(dataToSearch, languageOfData) {\n    this.page = 1;\n\n    this.params = new URLSearchParams({\n      key: API_KEY,\n      q: dataToSearch,\n      lang: languageOfData,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n    });\n  }\n\n  incrementPageCounter() {\n    this.page++;\n  }\n\n  checkData(data) {\n    if (data.length === 0) {\n      if (this.page === 1) {\n        throw new Error('Cannot find photos on this topic');\n      }\n\n      throw new Error('No more photos on this topic');\n    }\n  }\n\n  async fetchItemsByvalue() {\n    loaderIconRef.classList.remove('hidden');\n\n    const response = await axios\n      .get(`${BASE_URL}?${this.params}&page=${this.page}`)\n      .catch(() => {\n        throw new Error('Out of range');\n      });\n\n    const data = response.data;\n    this.checkData(data.hits);\n\n    return data.hits;\n  }\n}\n\nexport { APIHandler };\n","const createMarkup = async data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div photo-card>\n      <a href=\"${largeImageURL}\" class=\"card-link\">\n    <img class=\"photo-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${downloads}\n      </p>\n    </div>\n    </div>`\n    )\n    .join('');\n};\n\nexport { createMarkup };\n"],"names":["$bpxeT","parcelRequire","$9a3342ed943f683e$var$apiHandler","$9a3342ed943f683e$var$lightbox","$2a303a95fa661028$export$18967640b1430a3","document","querySelector","$2a303a95fa661028$export$7ccb58989d57b8c2","$2a303a95fa661028$export$c2c06f658e2657b3","$2a303a95fa661028$export$d91882d69e2c0809","$264246911620e418$export$4ba0ff064c127035","APIHandler","dataToSearch","languageOfData","this","page","params","URLSearchParams","key","q","lang","image_type","orientation","safesearch","per_page","data","length","Error","$parcel$interopDefault","$2TvXO","mark","_callee","response","classList","remove","$dIxxU","default","get","concat","_this","catch","_ctx","sent","checkData","hits","$e0dfb7f4b235c1dc$export$24783e9f3a24abe4","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$9a3342ed943f683e$var$generateMarkup","add","t0","insertAdjacentHTML","call","t1","style","position","top","$9a3342ed943f683e$var$handleObserverEvent","_callee1","entries","observer","forEach","entry","dataFromAPI","isIntersecting","incrementPageCounter","fetchItemsByvalue","refresh","unobserve","$6JpON","Notify","failure","message","$9a3342ed943f683e$var$handleFormSubmit","e","formRef","preventDefault","innerHTML","currentTarget","elements","searchQuery","value","language","$5IjG7","captionsData","captionDelay","IntersectionObserver","root","rootMargin","threshold","observe","addEventListener"],"version":3,"file":"gallery-with-infinityScroll.4847be7a.js.map"}