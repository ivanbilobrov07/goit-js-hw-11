{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BCAA,MAAMC,EAAgBC,SAASC,cAAc,gBACvCC,EAAaF,SAASC,cAAc,YACpCE,EAAiBH,SAASC,cAAc,cACxCG,EAAgBJ,SAASC,cAAc,mBACvCI,EAAuBL,SAASC,cAAc,kBCJpD,IAAAK,EAAAR,EAAA,SAOA,MAAMS,EAeJC,uBACEC,KAAKC,M,CAGPC,UAAUC,GACR,GAAoB,IAAhBA,EAAKC,OAAc,CACrB,GAAkB,IAAdJ,KAAKC,KACP,MAAM,IAAII,MAAM,oCAGlB,MAAM,IAAIA,MAAM,+B,EAIpBC,0BACEX,EAAcY,UAAUC,OAAO,UAE/B,MAMML,SANiBN,EAAAY,QACpBC,IAAI,4BAAeV,KAAKW,eAAeX,KAAKC,QAC5CW,OAAM,KACL,MAAM,IAAIP,MAAM,eAAe,KAGbF,KAGtB,OAFAH,KAAKE,UAAUC,EAAKU,MAEbV,EAAKU,I,CAxCdC,YAAYC,EAAcC,GACxBhB,KAAKC,KAAO,EAEZD,KAAKW,OAAS,IAAIM,gBAAgB,CAChCC,IAPU,qCAQVC,EAAGJ,EACHK,KAAMJ,EACNK,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,I,EClBhB,MAAMC,EAAenB,MAAMH,GAClBA,EACJuB,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KACI,oCACKL,0DACiBD,WAAsBE,uGAGjCC,oEAGAC,uEAGGC,wEAGCC,0CAKtBC,KAAK,IHfJC,EAAiB7B,MAAMH,IAC3BR,EAAcY,UAAU6B,IAAI,UAC5B3C,EAAW4C,mBAAmB,kBAAmBZ,EAAatB,IAE9DP,EAAqB0C,MAAMC,SAAW,WACtC7C,EAAea,UAAUC,OAAO,UAChCb,EAAc2C,MAAME,IAAM,mBAAmB,EAGzCC,EAAwBnC,UAC5BoC,EAAW3C,uBACXL,EAAea,UAAU6B,IAAI,UAC7B,IACE,MAAMO,QAAoBD,EAAWE,0BAC/BT,EAAeQ,GACrBE,EAASC,S,CACT,MAAOC,GACPpD,EAAcY,UAAU6B,IAAI,UAC5BY,EAAAC,GAASC,OAAOC,QAAQJ,EAAEK,Q,GA2C9B,IAAIV,EAAYG,EAEhBvD,EAAc+D,iBAAiB,UAzCN/C,MAAMyC,IAC7BA,EAAEO,iBAEF5D,EAAe6D,oBAAoB,QAASd,GAE5ChD,EAAW+D,UAAY,GACvB9D,EAAea,UAAU6B,IAAI,UAC7BxC,EAAqB0C,MAAMC,SAAW,SACtC5C,EAAc2C,MAAME,IAAM,MAE1B,MAAMiB,EAAUV,EAAEW,cAElB,IAAI3C,EAAe0C,EAAQE,SAASC,YAAYC,MAChD,MAAM7C,EAAiByC,EAAQE,SAASG,SAASD,MAEjDnB,EAAa,IAAI5C,EAAWiB,EAAcC,GAE1C,IACE,MAAM2B,QAAoBD,EAAWE,0BAC/BT,EAAeQ,E,CACrB,MAAOoB,GACPpE,EAAcY,UAAU6B,IAAI,UAC5BY,EAAAC,GAASC,OAAOC,QAAQY,EAAEX,Q,CAG5BK,EAAQE,SAASC,YAAYC,MAAQ,GAEtB,IAAIb,EAAA5D,GAAJ,CAAeK,EAAY,CACxCuE,QAAS,KAGXnB,EAAW,IAAIG,EAAAiB,GAAJ,CAAmB,aAAc,CAC1CC,aAAc,MACdC,aAAc,MAGhBzE,EAAe2D,iBAAiB,QAASZ,EAAsB","sources":["src/js/index(button).js","src/js/js-helpers-1/takingRefs.js","src/js/js-helpers-1/pixabay-api.js","src/js/js-helpers-1/createMarkup.js"],"sourcesContent":["import OnlyScroll from 'only-scrollbar';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport {\n  galleryRef,\n  searchFormRef,\n  loadMoreBtnRef,\n  loaderIconRef,\n  galleryControlersRef,\n} from './js-helpers-1/takingRefs';\nimport { APIHandler } from './js-helpers-1/pixabay-api';\nimport { createMarkup } from './js-helpers-1/createMarkup';\n\nconst generateMarkup = async data => {\n  loaderIconRef.classList.add('hidden');\n  galleryRef.insertAdjacentHTML('beforeend', await createMarkup(data));\n\n  galleryControlersRef.style.position = 'relative';\n  loadMoreBtnRef.classList.remove('hidden');\n  loaderIconRef.style.top = 'calc(100% - 50px)';\n};\n\nconst handlLoadMoreBtnClick = async () => {\n  apiHandler.incrementPageCounter();\n  loadMoreBtnRef.classList.add('hidden');\n  try {\n    const dataFromAPI = await apiHandler.fetchItemsByvalue();\n    await generateMarkup(dataFromAPI);\n    lightbox.refresh();\n  } catch (e) {\n    loaderIconRef.classList.add('hidden');\n    Notiflix.Notify.failure(e.message);\n  }\n};\n\nconst handleFormSubmit = async e => {\n  e.preventDefault();\n\n  loadMoreBtnRef.removeEventListener('click', handlLoadMoreBtnClick);\n\n  galleryRef.innerHTML = '';\n  loadMoreBtnRef.classList.add('hidden');\n  galleryControlersRef.style.position = 'static';\n  loaderIconRef.style.top = '50%';\n\n  const formRef = e.currentTarget;\n\n  let dataToSearch = formRef.elements.searchQuery.value;\n  const languageOfData = formRef.elements.language.value;\n\n  apiHandler = new APIHandler(dataToSearch, languageOfData);\n\n  try {\n    const dataFromAPI = await apiHandler.fetchItemsByvalue();\n    await generateMarkup(dataFromAPI);\n  } catch (e) {\n    loaderIconRef.classList.add('hidden');\n    Notiflix.Notify.failure(e.message);\n  }\n\n  formRef.elements.searchQuery.value = '';\n\n  const scroll = new OnlyScroll(galleryRef, {\n    damping: 0.8,\n  });\n\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  loadMoreBtnRef.addEventListener('click', handlLoadMoreBtnClick);\n};\n\nlet apiHandler, lightbox;\n\nsearchFormRef.addEventListener('submit', handleFormSubmit);\n","const searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\nconst loadMoreBtnRef = document.querySelector('.load-more');\nconst loaderIconRef = document.querySelector('.loader-wrapper');\nconst galleryControlersRef = document.querySelector('.gallery-inner');\n\nexport {\n  searchFormRef,\n  galleryRef,\n  loadMoreBtnRef,\n  loaderIconRef,\n  galleryControlersRef,\n};\n","import axios from 'axios';\n\nimport { loaderIconRef } from './takingRefs';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '37108036-8a6d23bc06a2bda3e904321d5';\n\nclass APIHandler {\n  constructor(dataToSearch, languageOfData) {\n    this.page = 1;\n\n    this.params = new URLSearchParams({\n      key: API_KEY,\n      q: dataToSearch,\n      lang: languageOfData,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n    });\n  }\n\n  incrementPageCounter() {\n    this.page++;\n  }\n\n  checkData(data) {\n    if (data.length === 0) {\n      if (this.page === 1) {\n        throw new Error('Cannot find photos on this topic');\n      }\n\n      throw new Error('No more photos on this topic');\n    }\n  }\n\n  async fetchItemsByvalue() {\n    loaderIconRef.classList.remove('hidden');\n\n    const response = await axios\n      .get(`${BASE_URL}?${this.params}&page=${this.page}`)\n      .catch(() => {\n        throw new Error('Out of range');\n      });\n\n    const data = response.data;\n    this.checkData(data.hits);\n\n    return data.hits;\n  }\n}\n\nexport { APIHandler };\n","const createMarkup = async data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div photo-card>\n      <a href=\"${largeImageURL}\" class=\"card-link\">\n    <img class=\"photo-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${downloads}\n      </p>\n    </div>\n    </div>`\n    )\n    .join('');\n};\n\nexport { createMarkup };\n"],"names":["$aKQqr","parcelRequire","$f818ea5a54ace1e6$export$18967640b1430a3","document","querySelector","$f818ea5a54ace1e6$export$7ccb58989d57b8c2","$f818ea5a54ace1e6$export$baa549330726212c","$f818ea5a54ace1e6$export$c2c06f658e2657b3","$f818ea5a54ace1e6$export$d91882d69e2c0809","$2shzp","$abf30a2993d4a81e$export$4ba0ff064c127035","incrementPageCounter","this","page","checkData","data","length","Error","async","classList","remove","default","get","params","catch","hits","constructor","dataToSearch","languageOfData","URLSearchParams","key","q","lang","image_type","orientation","safesearch","per_page","$45c5e34afa98167a$export$24783e9f3a24abe4","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$c2613fa22dd86fe5$var$generateMarkup","add","insertAdjacentHTML","style","position","top","$c2613fa22dd86fe5$var$handlLoadMoreBtnClick","$c2613fa22dd86fe5$var$apiHandler","dataFromAPI","fetchItemsByvalue","$c2613fa22dd86fe5$var$lightbox","refresh","e","$parcel$interopDefault","$7Y9D8","Notify","failure","message","addEventListener","preventDefault","removeEventListener","innerHTML","formRef","currentTarget","elements","searchQuery","value","language","e1","damping","$fZKcF","captionsData","captionDelay"],"version":3,"file":"gallery-with-button.bfc40060.js.map"}