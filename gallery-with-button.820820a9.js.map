{"mappings":"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","sources":["src/js/index(button).js","src/js/js-helpers-1/takingRefs.js","src/js/js-helpers-1/pixabay-api.js","src/js/js-helpers-1/createMarkup.js"],"sourcesContent":["import OnlyScroll from 'only-scrollbar';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport {\n  galleryRef,\n  searchFormRef,\n  loadMoreBtnRef,\n  loaderIconRef,\n  galleryControlersRef,\n} from './js-helpers-1/takingRefs';\nimport { APIHandler } from './js-helpers-1/pixabay-api';\nimport { createMarkup } from './js-helpers-1/createMarkup';\n\nconst generateMarkup = async data => {\n  loaderIconRef.classList.add('hidden');\n  galleryRef.insertAdjacentHTML('beforeend', await createMarkup(data));\n\n  galleryControlersRef.style.position = 'relative';\n  loadMoreBtnRef.classList.remove('hidden');\n  loaderIconRef.style.top = 'calc(100% - 50px)';\n};\n\nconst handlLoadMoreBtnClick = async () => {\n  apiHandler.incrementPageCounter();\n  loadMoreBtnRef.classList.add('hidden');\n  try {\n    const dataFromAPI = await apiHandler.fetchItemsByvalue();\n    await generateMarkup(dataFromAPI);\n    lightbox.refresh();\n  } catch (e) {\n    loaderIconRef.classList.add('hidden');\n    Notiflix.Notify.failure(e.message);\n  }\n};\n\nconst handleFormSubmit = async e => {\n  e.preventDefault();\n\n  loadMoreBtnRef.removeEventListener('click', handlLoadMoreBtnClick);\n\n  galleryRef.innerHTML = '';\n  loadMoreBtnRef.classList.add('hidden');\n  galleryControlersRef.style.position = 'static';\n  loaderIconRef.style.top = '50%';\n\n  const formRef = e.currentTarget;\n\n  let dataToSearch = formRef.elements.searchQuery.value;\n  const languageOfData = formRef.elements.language.value;\n\n  apiHandler = new APIHandler(dataToSearch, languageOfData);\n\n  try {\n    const dataFromAPI = await apiHandler.fetchItemsByvalue();\n    await generateMarkup(dataFromAPI);\n  } catch (e) {\n    loaderIconRef.classList.add('hidden');\n    Notiflix.Notify.failure(e.message);\n  }\n\n  formRef.elements.searchQuery.value = '';\n\n  const scroll = new OnlyScroll(galleryRef, {\n    damping: 0.8,\n  });\n\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  loadMoreBtnRef.addEventListener('click', handlLoadMoreBtnClick);\n};\n\nlet apiHandler, lightbox;\n\nsearchFormRef.addEventListener('submit', handleFormSubmit);\n","const searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\nconst loadMoreBtnRef = document.querySelector('.load-more');\nconst loaderIconRef = document.querySelector('.loader-wrapper');\nconst galleryControlersRef = document.querySelector('.gallery-inner');\n\nexport {\n  searchFormRef,\n  galleryRef,\n  loadMoreBtnRef,\n  loaderIconRef,\n  galleryControlersRef,\n};\n","import axios from 'axios';\n\nimport { loaderIconRef } from './takingRefs';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '37108036-8a6d23bc06a2bda3e904321d5';\n\nclass APIHandler {\n  constructor(dataToSearch, languageOfData) {\n    this.page = 1;\n\n    this.params = new URLSearchParams({\n      key: API_KEY,\n      q: dataToSearch,\n      lang: languageOfData,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n    });\n  }\n\n  incrementPageCounter() {\n    this.page++;\n  }\n\n  checkData(data) {\n    if (data.length === 0) {\n      if (this.page === 1) {\n        throw new Error('Cannot find photos on this topic');\n      }\n\n      throw new Error('No more photos on this topic');\n    }\n  }\n\n  async fetchItemsByvalue() {\n    loaderIconRef.classList.remove('hidden');\n\n    const response = await axios\n      .get(`${BASE_URL}?${this.params}&page=${this.page}`)\n      .catch(() => {\n        throw new Error('Out of range');\n      });\n\n    const data = response.data;\n    this.checkData(data.hits);\n\n    return data.hits;\n  }\n}\n\nexport { APIHandler };\n","const createMarkup = async data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div photo-card>\n      <a href=\"${largeImageURL}\" class=\"card-link\">\n    <img class=\"photo-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${downloads}\n      </p>\n    </div>\n    </div>`\n    )\n    .join('');\n};\n\nexport { createMarkup };\n"],"names":["$cf2f36b3c3392b2e$var$apiHandler","$cf2f36b3c3392b2e$var$lightbox","$bpxeT","parcelRequire","$0c514a0c52ea1b1c$export$18967640b1430a3","document","querySelector","$0c514a0c52ea1b1c$export$7ccb58989d57b8c2","$0c514a0c52ea1b1c$export$baa549330726212c","$0c514a0c52ea1b1c$export$c2c06f658e2657b3","$0c514a0c52ea1b1c$export$d91882d69e2c0809","$b6a7b683cd1a5bf8$export$4ba0ff064c127035","APIHandler","dataToSearch","languageOfData","this","page","params","URLSearchParams","key","q","lang","image_type","orientation","safesearch","per_page","data","length","Error","$parcel$interopDefault","$2TvXO","mark","_callee","response","classList","remove","$dIxxU","default","get","concat","_this","catch","_ctx","sent","checkData","hits","$720beefc6325d10e$export$24783e9f3a24abe4","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$cf2f36b3c3392b2e$var$generateMarkup","add","t0","insertAdjacentHTML","call","t1","style","position","top","$cf2f36b3c3392b2e$var$handlLoadMoreBtnClick","dataFromAPI","incrementPageCounter","fetchItemsByvalue","refresh","$6JpON","Notify","failure","message","$cf2f36b3c3392b2e$var$handleFormSubmit","e","formRef","preventDefault","removeEventListener","innerHTML","currentTarget","elements","searchQuery","value","language","$1cIlU","damping","$5IjG7","captionsData","captionDelay","addEventListener"],"version":3,"file":"gallery-with-button.820820a9.js.map"}